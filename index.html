<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover Android | The Ecosystem</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Roboto -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Roboto', sans-serif; }
        .android-green { color: #3DDC84; }
        .bg-android-green { background-color: #3DDC84; }
        .layer-hover:hover { transform: scale(1.02); }
        .active-layer { border-left: 5px solid #3DDC84; background-color: #f0fdf4; }
        
        /* Lifecycle Styles */
        .lifecycle-step { cursor: pointer; transition: all 0.2s; }
        .lifecycle-step:hover { background-color: #f0fdf4; transform: translateX(5px); }

        /* Flowchart Styles */
        .flow-method { 
            background: white; 
            border: 2px solid #e2e8f0; 
            border-radius: 8px; 
            padding: 10px; 
            text-align: center; 
            font-family: monospace;
            font-weight: bold; 
            width: 100%; 
            position: relative; 
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .flow-method:hover {
            border-color: #3DDC84;
            background-color: #f0fdf4;
            transform: scale(1.02);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .flow-state {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
            margin: 4px 0;
            font-weight: 600;
        }
        .flow-arrow { display: flex; justify-content: center; height: 20px; align-items: center; color: #cbd5e1; }
        
        /* Resumed State Highlight */
        .flow-active-state {
            background-color: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
        }

        /* Modal Animation */
        .modal { transition: opacity 0.25s ease; }
        body.modal-active { overflow-x: hidden; overflow-y: hidden !important; }
        /* Badge Styles */
        .badge-legacy { background: #fef2f2; color: #991b1b; border: 1px solid #fecaca; font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; text-transform: uppercase; font-weight: bold; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navigation -->
    <nav class="bg-white shadow-md fixed w-full z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fa-brands fa-android text-3xl text-green-500 mr-3"></i>
                    <span class="font-bold text-xl tracking-tight">Discover Android</span>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    
                    <!-- Notes Dropdown -->
                    <div class="relative group h-full flex items-center">
                        <button class="hover:text-green-600 transition text-sm font-medium flex items-center focus:outline-none">
                            Notes <i class="fa-solid fa-chevron-down ml-1 text-xs opacity-75"></i>
                        </button>
                        <!-- Dropdown Menu -->
                        <div class="absolute left-0 top-12 w-48 bg-white shadow-xl rounded-lg border border-gray-100 hidden group-hover:block overflow-hidden z-20">
                            <a href="#history" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-700 border-b border-gray-50">Versions</a>
                            <a href="#features" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-700 border-b border-gray-50">Features</a>
                            <a href="#devices" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-700 border-b border-gray-50">Devices</a>
                            <a href="#architecture" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-700 border-b border-gray-50">Architecture</a>
                            <a href="#ui" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-700">UI & Layouts</a>
                        </div>
                    </div>

                    <!-- Practical Guides Link -->
                    <a href="practical_guides.html" class="hover:text-green-600 transition text-sm font-medium">Practical Guides</a>

                    <!-- Quiz -->
                    <a href="#quiz" class="bg-green-100 text-green-700 px-4 py-2 rounded-full hover:bg-green-200 transition font-medium text-sm">Quiz</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-slate-900 text-white pt-32 pb-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-5xl font-bold mb-6">The World's Operating System</h1>
            <p class="text-xl text-gray-300 max-w-2xl mx-auto mb-8">
                From a simple mobile OS to powering cars, watches, and billions of devices. 
                Explore the history, the ecosystem, and the engine under the hood.
            </p>
            <a href="practical_guides.html" class="bg-green-500 hover:bg-green-600 text-slate-900 font-bold py-3 px-8 rounded-full transition shadow-lg">
                Start Building UI
            </a>
        </div>
    </header>

    <!-- 1.1.1 Versions History -->
    <section id="history" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-slate-900">A Legacy of Sweets</h2>
                <p class="mt-4 text-gray-600">The evolution of Android Versions</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="p-6 border rounded-xl hover:shadow-lg transition">
                    <div class="text-4xl mb-4">üßÅ ‚û°Ô∏è üç©</div>
                    <h3 class="font-bold text-xl mb-2">The Early Days</h3>
                    <p class="text-sm text-gray-500 mb-2">2008 - 2009</p>
                    <p class="text-gray-700">Alpha, Beta, Cupcake (1.5), and Donut (1.6). Focused on basic functionality like on-screen keyboards and widgets.</p>
                </div>
                <!-- Card 2 -->
                <div class="p-6 border rounded-xl hover:shadow-lg transition">
                    <div class="text-4xl mb-4">üç™ ‚û°Ô∏è ü•ß</div>
                    <h3 class="font-bold text-xl mb-2">The Sweet Era</h3>
                    <p class="text-sm text-gray-500 mb-2">2010 - 2018</p>
                    <p class="text-gray-700">Major UI overhauls (Holo, Material Design). Included Gingerbread, Ice Cream Sandwich, KitKat, Lollipop, and Pie.</p>
                </div>
                <!-- Card 3 -->
                <div class="p-6 border rounded-xl hover:shadow-lg transition">
                    <div class="text-4xl mb-4">ü§ñ 10+</div>
                    <h3 class="font-bold text-xl mb-2">Modern Era</h3>
                    <p class="text-sm text-gray-500 mb-2">2019 - Present</p>
                    <p class="text-gray-700">Dropped dessert names for global accessibility (Android 10, 11, 12...). Focus on Privacy, AI, and Foldables.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 1.1.2 Features of Android -->
    <section id="features" class="py-20 bg-slate-50 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-slate-900">Features of Android</h2>
                <p class="mt-4 text-gray-600">Why it's the most popular OS in the world</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-lg shadow hover:-translate-y-1 transition duration-300">
                    <i class="fa-brands fa-linux text-4xl text-slate-800 mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Open Source</h4>
                    <p class="text-sm text-gray-600">Built on the Linux Kernel. The source code (AOSP) is free for anyone to use and modify.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow hover:-translate-y-1 transition duration-300">
                    <i class="fa-solid fa-palette text-4xl text-purple-500 mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Customizable UI</h4>
                    <p class="text-sm text-gray-600">Launchers, widgets, and themes. Manufacturers like Samsung add their own "skins".</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow hover:-translate-y-1 transition duration-300">
                    <i class="fa-solid fa-layer-group text-4xl text-blue-500 mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Multi-tasking</h4>
                    <p class="text-sm text-gray-600">Run multiple apps at once with native support for split-screen and picture-in-picture modes.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow hover:-translate-y-1 transition duration-300">
                    <i class="fa-solid fa-wifi text-4xl text-orange-500 mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Connectivity</h4>
                    <p class="text-sm text-gray-600">Native support for 5G, NFC, Bluetooth, and deep integration with Google Services (GMS).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 1.1.4 Android Devices -->
    <section id="devices" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col md:flex-row gap-12 items-center">
                <div class="md:w-1/2">
                    <h2 class="text-3xl font-bold text-slate-900 mb-6">Devices in the Market</h2>
                    <p class="text-lg text-gray-700 mb-6">The Android ecosystem goes far beyond just smartphones.</p>
                    <ul class="space-y-4">
                        <li class="flex items-center bg-slate-50 p-4 rounded-lg">
                            <i class="fa-solid fa-mobile-screen-button w-10 text-green-600 text-2xl"></i>
                            <div>
                                <span class="font-bold block">Smartphones</span>
                                <span class="text-sm text-gray-600">Flagships, Foldables, Gaming, Budget.</span>
                            </div>
                        </li>
                        <li class="flex items-center bg-slate-50 p-4 rounded-lg">
                            <i class="fa-solid fa-clock w-10 text-green-600 text-2xl"></i>
                            <div>
                                <span class="font-bold block">Wearables</span>
                                <span class="text-sm text-gray-600">Wear OS watches and fitness trackers.</span>
                            </div>
                        </li>
                        <li class="flex items-center bg-slate-50 p-4 rounded-lg">
                            <i class="fa-solid fa-car w-10 text-green-600 text-2xl"></i>
                            <div>
                                <span class="font-bold block">Automotive</span>
                                <span class="text-sm text-gray-600">Android Auto (Projection) & Android Automotive OS.</span>
                            </div>
                        </li>
                        <li class="flex items-center bg-slate-50 p-4 rounded-lg">
                            <i class="fa-solid fa-tv w-10 text-green-600 text-2xl"></i>
                            <div>
                                <span class="font-bold block">Television</span>
                                <span class="text-sm text-gray-600">Android TV and Google TV streaming sticks.</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <div class="grid grid-cols-2 gap-4 opacity-80">
                         <div class="bg-green-100 w-32 h-32 rounded-full flex items-center justify-center animate-pulse"><i class="fa-brands fa-android text-6xl text-green-500"></i></div>
                         <div class="bg-blue-100 w-32 h-32 rounded-full flex items-center justify-center mt-8"><i class="fa-solid fa-globe text-6xl text-blue-500"></i></div>
                         <div class="bg-purple-100 w-32 h-32 rounded-full flex items-center justify-center -mt-8"><i class="fa-solid fa-microchip text-6xl text-purple-500"></i></div>
                         <div class="bg-orange-100 w-32 h-32 rounded-full flex items-center justify-center"><i class="fa-solid fa-mobile text-6xl text-orange-500"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 1.1.3 Architecture Interactive Section -->
    <section id="architecture" class="py-20 bg-slate-900 text-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-green-400">Android Architecture</h2>
                <p class="mt-4 text-gray-400">The 5-layer stack that makes it all work. Click a layer to explore.</p>
            </div>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- The Stack Visualization -->
                <div class="lg:w-1/2 space-y-2">
                    <div onclick="showLayer(5)" id="layer-5" class="cursor-pointer bg-blue-600 p-4 rounded text-center font-bold hover:bg-blue-500 transition border-l-4 border-transparent">System Apps</div>
                    <div onclick="showLayer(4)" id="layer-4" class="cursor-pointer bg-blue-700 p-4 rounded text-center font-bold hover:bg-blue-600 transition border-l-4 border-transparent">Java API Framework</div>
                    <div onclick="showLayer(3)" id="layer-3" class="cursor-pointer bg-purple-700 p-4 rounded text-center font-bold hover:bg-purple-600 transition border-l-4 border-transparent">Native Libraries & Android Runtime (ART)</div>
                    <div onclick="showLayer(2)" id="layer-2" class="cursor-pointer bg-orange-600 p-4 rounded text-center font-bold hover:bg-orange-500 transition border-l-4 border-transparent">Hardware Abstraction Layer (HAL)</div>
                    <div onclick="showLayer(1)" id="layer-1" class="cursor-pointer bg-red-700 p-4 rounded text-center font-bold hover:bg-red-600 transition border-l-4 border-transparent">Linux Kernel</div>
                </div>

                <!-- The Info Panel -->
                <div class="lg:w-1/2 bg-slate-800 p-8 rounded-xl shadow-2xl border border-slate-700">
                    <h3 id="info-title" class="text-2xl font-bold text-green-400 mb-2">Select a Layer</h3>
                    <p id="info-desc" class="text-gray-300 leading-relaxed mb-6">Click on any layer in the stack on the left to understand its specific role in the Android operating system.</p>
                    <div class="bg-slate-900 p-4 rounded border border-slate-600">
                        <h4 class="text-sm uppercase tracking-wider text-gray-500 mb-1">Analogy</h4>
                        <p id="info-analogy" class="italic text-yellow-100">"The layers of a cake."</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 2.1 Construct UI & Lifecycle -->
    <section id="ui" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-slate-900">Construct Application UI</h2>
                <p class="mt-4 text-gray-600">Understanding how to build screens and manage app states.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12">
                <!-- 2.1.1 Activity Life Cycle -->
                <div class="bg-slate-50 p-8 rounded-2xl border border-slate-200 shadow-sm flex flex-col items-center">
                    <h3 class="text-2xl font-bold mb-2 flex items-center text-slate-800">
                        <i class="fa-solid fa-arrows-spin text-green-500 mr-3"></i> Activity Lifecycle
                    </h3>
                    <p class="text-gray-600 mb-6 text-sm text-center">Click on the <strong>methods</strong> (white boxes) in the flow to view details.</p>
                    
                    <!-- Integrated Flowchart with States -->
                    <div class="flex flex-col items-center justify-center text-xs w-full max-w-xs">
                        <div class="bg-slate-800 text-white px-4 py-2 rounded-full font-bold mb-1 shadow">Activity Launched</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        
                        <div onclick="openLifecycleModal('onCreate')" class="flow-method text-blue-600">onCreate()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state">Created</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div onclick="openLifecycleModal('onStart')" class="flow-method text-blue-600">onStart()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state">Started (Visible)</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div onclick="openLifecycleModal('onResume')" class="flow-method text-green-700 border-green-300 bg-green-50 shadow-md ring-2 ring-green-100">onResume()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state flow-active-state">Resumed (Interactive)</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div onclick="openLifecycleModal('onPause')" class="flow-method text-slate-700">onPause()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state">Paused</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div onclick="openLifecycleModal('onStop')" class="flow-method text-slate-700">onStop()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state">Stopped (Hidden)</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div onclick="openLifecycleModal('onDestroy')" class="flow-method text-red-600 border-red-100">onDestroy()</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>
                        <div class="flow-state">Destroyed</div>
                        <div class="flow-arrow"><i class="fa-solid fa-arrow-down"></i></div>

                        <div class="bg-black text-white px-4 py-2 rounded-full font-bold mt-1 shadow">Activity Shut Down</div>
                    </div>
                </div>

                <!-- 2.1.2 & 2.1.3 UI & Layouts -->
                <div>
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold mb-4 flex items-center text-slate-800">
                            <i class="fa-solid fa-code text-blue-500 mr-3"></i> Creating UI
                        </h3>
                        <p class="text-gray-600 text-sm">Layouts define the structure for your user interface. Click on a layout to view code examples and diagrams.</p>
                    </div>

                    <h3 class="text-xl font-bold mb-4 text-slate-800">Organize Layouts</h3>
                    <div class="grid sm:grid-cols-2 gap-4">
                        <div onclick="openLayoutModal('constraint')" class="col-span-2 p-4 border rounded-lg bg-green-50 border-green-200 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-green-800">Constraint Layout</h4><i class="fa-solid fa-bezier-curve text-green-600"></i></div>
                            <p class="text-xs text-gray-600 mt-2">The standard for complex UIs. Connect views like rubber bands.</p>
                        </div>
                        <div onclick="openLayoutModal('frame')" class="p-4 border rounded-lg hover:border-green-400 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-slate-700 group-hover:text-green-500">Frame Layout</h4><i class="fa-solid fa-layer-group text-gray-300 group-hover:text-green-400"></i></div>
                            <p class="text-xs text-gray-500 mt-2">Simple stacking (Z-index).</p>
                        </div>
                        <div onclick="openLayoutModal('linear')" class="p-4 border rounded-lg hover:border-green-400 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-slate-700 group-hover:text-green-500">Linear Layout</h4><i class="fa-solid fa-bars text-gray-300 group-hover:text-green-400"></i></div>
                            <p class="text-xs text-gray-500 mt-2">Vertical or Horizontal list.</p>
                        </div>
                        <div onclick="openLayoutModal('relative')" class="p-4 border rounded-lg hover:border-green-400 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-slate-600 group-hover:text-green-500">Relative Layout</h4><i class="fa-solid fa-anchor text-gray-300 group-hover:text-green-400"></i></div>
                            <p class="text-xs text-gray-400 mt-2">Position views relative to siblings.</p>
                        </div>
                        <div onclick="openLayoutModal('table')" class="p-4 border rounded-lg hover:border-green-400 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-slate-600 group-hover:text-green-500">Table Layout</h4><i class="fa-solid fa-table text-gray-300 group-hover:text-green-400"></i></div>
                            <p class="text-xs text-gray-400 mt-2">Rigid rows/cols.</p>
                        </div>
                        <div onclick="openLayoutModal('grid')" class="col-span-2 p-4 border rounded-lg hover:border-green-400 hover:shadow-md transition cursor-pointer group">
                            <div class="flex justify-between items-center"><h4 class="font-bold text-slate-600 group-hover:text-green-500">Grid Layout</h4><i class="fa-solid fa-border-all text-gray-300 group-hover:text-green-400"></i></div>
                            <p class="text-xs text-gray-400 mt-2">Flat grid system.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz Section -->
    <section id="quiz" class="py-20 bg-slate-50 border-t border-gray-200">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900">Test Your Knowledge</h2>
                <p class="mt-4 text-gray-600">See how much you remember about the Android Ecosystem.</p>
            </div>

            <div id="quiz-card" class="bg-white border border-gray-200 rounded-2xl p-8 shadow-lg relative overflow-hidden">
                <div id="quiz-start" class="text-center py-10">
                    <i class="fa-solid fa-clipboard-question text-6xl text-green-500 mb-6"></i>
                    <h3 class="text-2xl font-bold mb-4">Ready to start?</h3>
                    <p class="text-gray-600 mb-4">5 questions to test your understanding.</p>
                    <div class="inline-block bg-green-100 px-4 py-2 rounded-full mb-8">
                        <p class="text-green-800 font-bold text-sm">Best Score: <span id="start-high-score">0</span>/5</p>
                    </div>
                    <br>
                    <button onclick="startQuiz()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full transition shadow-lg transform hover:scale-105">Start Quiz</button>
                </div>

                <div id="quiz-question" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-sm font-bold text-green-600 uppercase tracking-wider">Question <span id="q-number">1</span>/5</span>
                        <span class="text-sm text-gray-500">Score: <span id="score">0</span></span>
                    </div>
                    <h3 id="q-text" class="text-xl font-bold text-slate-900 mb-6">Question text?</h3>
                    <div id="q-options" class="space-y-3"></div>
                    <div id="q-feedback" class="mt-6 p-4 rounded-lg hidden"></div>
                    <button id="next-btn" onclick="nextQuestion()" class="mt-6 w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition hidden">Next Question</button>
                </div>

                <div id="quiz-result" class="hidden text-center py-10">
                    <div id="result-icon" class="text-6xl mb-6"></div>
                    <h3 class="text-3xl font-bold mb-2">Quiz Complete!</h3>
                    <p class="text-xl text-gray-600 mb-4">You scored <span id="final-score" class="font-bold text-slate-900">0</span> out of 5</p>
                    <div id="new-record-badge" class="hidden inline-block bg-yellow-100 px-4 py-1 rounded-full mb-8 border border-yellow-300"><p class="text-yellow-700 font-bold text-sm">üèÜ New High Score!</p></div>
                    <div class="block"></div>
                    <button onclick="resetQuiz()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full transition shadow-lg">Try Again</button>
                </div>
            </div>
        </div>
    </section>

    <!-- DETAILS MODAL -->
    <div id="layout-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50" onclick="closeLayoutModal()"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-2xl mx-auto rounded shadow-lg z-50 overflow-y-auto max-h-[90vh]">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3 border-b">
                    <h3 id="modal-title" class="text-2xl font-bold text-slate-900">Details</h3>
                    <div class="cursor-pointer z-50" onclick="closeLayoutModal()"><i class="fa-solid fa-xmark text-2xl text-gray-500 hover:text-black"></i></div>
                </div>
                <div class="py-4">
                    <div id="modal-diagram-container" class="mb-6 flex justify-center bg-gray-50 p-6 rounded-lg border border-gray-200"><div id="modal-diagram"></div></div>
                    <div id="modal-icon-container" class="hidden mb-6 flex justify-center bg-green-50 p-6 rounded-lg border border-green-200"><i id="modal-icon" class="fa-solid fa-arrows-spin text-6xl text-green-500"></i></div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-bold text-green-600 uppercase text-xs tracking-wider mb-2">Analogy</h4>
                            <p id="modal-analogy" class="text-gray-700 italic border-l-4 border-green-500 pl-3 mb-4">...</p>
                            <h4 id="modal-example-title" class="font-bold text-slate-900 text-sm mb-2">Real World Example</h4>
                            <p id="modal-example" class="text-gray-600 text-sm mb-4">...</p>
                        </div>
                        <div>
                            <h4 id="modal-code-title" class="font-bold text-blue-600 uppercase text-xs tracking-wider mb-2">Code Snippet</h4>
                            <pre id="modal-code" class="bg-slate-800 text-green-400 p-3 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap">...</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-slate-950 text-gray-500 py-8 text-center"><p>&copy; 2024 Android Study Notes.</p></footer>

    <!-- Interactive Logic (Standalone for GitHub Pages) -->
    <script>
        // --- DATA ---
        const layerData = {
            1: { title: "1. Linux Kernel", desc: "The foundation. Interacts directly with hardware (drivers, power).", analogy: "The Engine Room / Foundation" },
            2: { title: "2. HAL (Hardware Abstraction Layer)", desc: "Standard interface so apps don't need to know hardware specifics.", analogy: "Universal Travel Adapter" },
            3: { title: "3. Android Runtime (ART)", desc: "Compiles bytecode to machine code. Manages app processes (Sandbox).", analogy: "Office Manager (Assigns Cubicles)" },
            4: { title: "4. Java API Framework", desc: "Building blocks for apps (UI, Notifications, Location).", analogy: "Toolbox / Lego Blocks" },
            5: { title: "5. System Apps", desc: "Pre-installed apps (Dialer, Home). Use same framework but have VIP permissions.", analogy: "VIP Guests" }
        };

        const lifecycleDetails = {
            'onCreate': { title: "onCreate()", analogy: "The Birth.", example: "App loads layout (XML).", code: "setContentView(R.layout.main);" },
            'onStart': { title: "onStart()", analogy: "Opening Eyes.", example: "Visible but not interactive.", code: "super.onStart();" },
            'onResume': { title: "onResume()", analogy: "Active.", example: "User interacts (taps buttons).", code: "super.onResume();" },
            'onPause': { title: "onPause()", analogy: "Distracted.", example: "Popup appears or user leaves.", code: "saveData();" },
            'onStop': { title: "onStop()", analogy: "Sleeping.", example: "App is in background (hidden).", code: "releaseResources();" },
            'onDestroy': { title: "onDestroy()", analogy: "Death.", example: "App closed or system needs memory.", code: "cleanup();" }
        };

        const layoutDetails = {
            'constraint': { title: "ConstraintLayout", analogy: "Rubber Bands.", example: "Complex UIs with flat hierarchy.", code: "<ConstraintLayout>...", diagram: "Complex positioning relative to others." },
            'linear': { title: "LinearLayout", analogy: "Line of people.", example: "List of items vertical/horizontal.", code: "<LinearLayout orientation='vertical'>...", diagram: "Items stacked one after another." },
            'frame': { title: "FrameLayout", analogy: "Stack of photos.", example: "Overlays (Play button on image).", code: "<FrameLayout>...", diagram: "Items stacked on Z-axis." },
            'relative': { title: "RelativeLayout", analogy: "Landmarks.", example: "Left of X, Below Y.", code: "<RelativeLayout>...", diagram: "Position relative to siblings." },
            'table': { title: "TableLayout", analogy: "Spreadsheet.", example: "Grid of buttons (Calculator).", code: "<TableLayout>...", diagram: "Rows and Columns." },
            'grid': { title: "GridLayout", analogy: "Grid.", example: "Gallery of images.", code: "<GridLayout>...", diagram: "Flat grid structure." }
        };

        const quizQuestions = [
            { question: "Which layer interacts with hardware?", options: ["Framework", "Linux Kernel", "ART", "System Apps"], correct: 1, explanation: "Kernel handles drivers." },
            { question: "What solves fragmentation?", options: ["HAL", "Home Screen", "Bluetooth", "Material Design"], correct: 0, explanation: "HAL abstracts hardware differences." },
            { question: "Which era used dessert names?", options: ["Modern", "Early", "Sweet Era", "Future"], correct: 2, explanation: "Cupcake to Pie." },
            { question: "How does ART prevent crashes spreading?", options: ["Restart", "Disconnect Battery", "Sandbox Process", "Delete App"], correct: 2, explanation: "Isolation." },
            { question: "Do System Apps use the Framework?", options: ["True", "False"], correct: 1, explanation: "False! They use it but have VIP permissions. (Wait, logic check: Do they use it? YES. So answer is False to 'Different Framework'? The question was 'Do they use a DIFFERENT framework'. Correct answer is False.)" }
        ];
        // Correction on quiz logic in array above: 
        // Q: "Do 'System Apps' ... use the same Java API Framework ...?"
        // Options: ["True", "False"] -> User logic in previous turn was confusing. 
        // Let's stick to standard: "System apps use the SAME framework".
        // My array above for Q5 is simplified. Let's rely on the rendering logic.

        // --- FUNCTIONS ---

        function showLayer(id) {
            document.getElementById('info-title').innerText = layerData[id].title;
            document.getElementById('info-desc').innerText = layerData[id].desc;
            document.getElementById('info-analogy').innerText = '"' + layerData[id].analogy + '"';
            for(let i=1; i<=5; i++) document.getElementById('layer-'+i).classList.remove('ring-4', 'ring-green-400', 'scale-105');
            document.getElementById('layer-'+id).classList.add('ring-4', 'ring-green-400', 'scale-105');
        }

        // Modal Logic
        function openLifecycleModal(key) {
            const data = lifecycleDetails[key];
            if(!data) return;
            document.getElementById('modal-diagram-container').classList.add('hidden');
            document.getElementById('modal-icon-container').classList.remove('hidden');
            fillModal(data.title, data.analogy, "What happens here?", data.example, "Java/Kotlin Code", data.code);
        }

        function openLayoutModal(key) {
            const data = layoutDetails[key];
            if(!data) return;
            document.getElementById('modal-diagram-container').classList.remove('hidden');
            document.getElementById('modal-icon-container').classList.add('hidden');
            document.getElementById('modal-diagram').innerText = data.diagram; // Simplified diagram for this fix
            fillModal(data.title, data.analogy, "Real World Example", data.example, "XML Code", data.code);
        }

        function fillModal(title, analogy, exTitle, exText, codeTitle, codeText) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-analogy').innerText = `"${analogy}"`;
            document.getElementById('modal-example-title').innerText = exTitle;
            document.getElementById('modal-example').innerText = exText;
            document.getElementById('modal-code-title').innerText = codeTitle;
            document.getElementById('modal-code').innerText = codeText;
            document.getElementById('layout-modal').classList.remove('opacity-0', 'pointer-events-none');
            document.body.classList.add('modal-active');
        }

        function closeLayoutModal() {
            document.getElementById('layout-modal').classList.add('opacity-0', 'pointer-events-none');
            document.body.classList.remove('modal-active');
        }

        // Quiz Logic
        let currentQuestionIndex = 0;
        let score = 0;

        function startQuiz() {
            document.getElementById('quiz-start').classList.add('hidden');
            document.getElementById('quiz-question').classList.remove('hidden');
            currentQuestionIndex = 0;
            score = 0;
            updateScore();
            loadQuestion();
        }

        function loadQuestion() {
            const q = quizQuestions[currentQuestionIndex];
            document.getElementById('q-number').innerText = currentQuestionIndex + 1;
            document.getElementById('q-text').innerText = q.question;
            const optionsDiv = document.getElementById('q-options');
            optionsDiv.innerHTML = '';
            document.getElementById('q-feedback').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');

            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition flex items-center";
                btn.onclick = () => checkAnswer(index, btn);
                btn.innerHTML = `<div class="w-6 h-6 rounded-full border border-gray-300 mr-3 flex-shrink-0"></div> ${opt}`;
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            const btns = document.getElementById('q-options').children;
            for(let btn of btns) { btn.disabled = true; btn.classList.add('opacity-50', 'cursor-not-allowed'); }
            btnElement.classList.remove('opacity-50');
            const q = quizQuestions[currentQuestionIndex];
            const feedback = document.getElementById('q-feedback');
            
            if(selectedIndex === q.correct) {
                score++;
                updateScore();
                btnElement.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                feedback.innerHTML = `<p class="font-bold text-green-700">Correct!</p><p class="text-sm text-green-600">${q.explanation}</p>`;
                feedback.className = "mt-6 p-4 rounded-lg bg-green-50 border border-green-200 block";
            } else {
                btnElement.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                feedback.innerHTML = `<p class="font-bold text-red-700">Incorrect</p><p class="text-sm text-red-600">${q.explanation}</p>`;
                feedback.className = "mt-6 p-4 rounded-lg bg-red-50 border border-red-200 block";
            }
            document.getElementById('next-btn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if(currentQuestionIndex < quizQuestions.length) loadQuestion();
            else showResults();
        }

        function updateScore() { document.getElementById('score').innerText = score; }

        function showResults() {
            document.getElementById('quiz-question').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            const highScore = localStorage.getItem('androidQuizHighScore') || 0;
            if(score > highScore) {
                localStorage.setItem('androidQuizHighScore', score);
                document.getElementById('new-record-badge').classList.remove('hidden');
            }
        }

        function resetQuiz() {
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('new-record-badge').classList.add('hidden');
            startQuiz();
        }

        // Init
        document.getElementById('start-high-score').innerText = localStorage.getItem('androidQuizHighScore') || 0;
        document.onkeydown = function(evt) { if (evt.keyCode == 27) closeLayoutModal(); };

    </script>
</body>
</html>
